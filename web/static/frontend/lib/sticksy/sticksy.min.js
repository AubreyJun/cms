window.Sticksy=function(){"use strict";var s="static",i="fixed",n="stuck",o=[];function e(t,i){if(!t)throw new Error("You have to specify the target element");if("string"!=typeof t&&!(t instanceof Element))throw new Error("Expected a string or element, but got: "+Object.prototype.toString.call(t));var n=r.findElement(t);if(!n)throw new Error("Cannot find target element: "+t);var s=n.parentNode;if(!s)throw new Error("Cannot find container of target element: "+t);i=i||{},this.t={containerEl:s,targetEl:n,topSpacing:i.topSpacing||0,listen:i.listen||!1},this.onStateChanged=null,this.nodeRef=n,o.push(this),this.i(this.t)}e.prototype.i=function(){var i=this;this.state=s,this.s=[],this.o=[];for(var t=this.t.targetEl;t;){var n=t.cloneNode(!0);n.style.visibility="hidden",n.className+=" sticksy-dummy-node",n.removeAttribute("id"),this.t.targetEl.parentNode.insertBefore(n,this.t.targetEl),this.s.push(t),this.o.push(n),t=t.nextElementSibling}this.h=0,this.u={top:0,bottom:0},this.l=!1,this.t.containerEl.style.position="relative",this.v=-1===getComputedStyle(this.t.containerEl).display.indexOf("flex"),this.t.listen&&(this.m=new MutationObserver(function(t){i.hardRefresh()}),this.p()),this.hardRefresh()},e.prototype.p=function(){this.t.listen&&!this.l&&(this.m.observe(this.t.containerEl,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),this.l=!0)},e.prototype.g=function(){this.t.listen&&this.l&&(this.m.disconnect(),this.l=!1)},e.prototype.C=function(t){return t<this.u.top?s:t>=this.u.bottom?n:i},e.prototype.S=function(){this.h=r.getComputedBox(this.s[this.s.length-1]).bottomWithMargin-r.getComputedBox(this.s[0]).topWithMargin},e.prototype.M=function(){var t=this.t.containerEl,i=this.s,n=r.getComputedBox(t),s=r.getComputedBox(i[0]);this.u={top:s.topWithMargin-this.t.topSpacing,bottom:n.bottom-n.paddingBottom-this.t.topSpacing-this.h}},e.prototype.j=function(t){t===s?(this.k(this.s),this.B(this.o)):(this.P(this.s),t===i?this.T(this.s):this.O(this.s),this.W(this.o))},e.prototype.refresh=function(){var t=this.C(window.pageYOffset,this.u);t!==this.state&&(this.g(),this.j(t),this.state=t,this.p(),"function"==typeof this.onStateChanged&&this.onStateChanged(t))},e.prototype.hardRefresh=function(){this.g();var t=this.state;this.state=s,this.j(this.state),this.P(this.s),this.S(),this.M(),this.state=this.C(window.pageYOffset,this.u),this.j(this.state),this.p(),"function"==typeof this.onStateChanged&&t!==this.state&&this.onStateChanged(this.state)},e.prototype.disable=function(){this.state=s,this.j(this.state),o.splice(o.indexOf(this),1)},e.prototype.enable=function(){o.push(this),this.hardRefresh()},e.prototype.T=function(t){for(var i=0,n=this.t.topSpacing,s=0;s<t.length;s++){var o=t[s],h=r.getComputedBox(o),e=this.v?Math.max(0,i-h.marginTop):i;o.style.position="fixed",o.style.top=n+e+"px",o.style.bottom="",n+=h.height+h.marginTop+e,i=h.marginBottom}},e.prototype.O=function(t){for(var i=0,n=r.getComputedBox(this.t.containerEl).paddingBottom,s=t.length-1;0<=s;s--){var o=t[s],h=r.getComputedBox(o),e=this.v?Math.max(0,i-h.marginBottom):i;o.style.position="absolute",o.style.top="auto",o.style.bottom=n+e+"px",n+=h.height+h.marginBottom+e,i=h.marginTop}},e.prototype.k=function(t){t.forEach(function(t){t.style.position="",t.style.top="",t.style.bottom="",t.style.height="",t.style.width=""})},e.prototype.B=function(t){t.forEach(function(t){t.style.display="none"})},e.prototype.W=function(t){for(var i=0;i<t.length;i++)t[i].style.display=getComputedStyle(this.s[i]).display},e.prototype.P=function(){for(var t=0;t<this.s.length;t++){var i=this.s[t],n=getComputedStyle(i);i.style.width=n.width,i.style.height=n.height}},e.refreshAll=function(){for(var t=0;t<o.length;t++)o[t].refresh()},e.hardRefreshAll=function(){for(var t=0;t<o.length;t++)o[t].hardRefresh()},e.disableAll=function(){for(var t=o.slice(),i=0;i<t.length;i++)o[i].disable()},e.initializeAll=function(t,i,n){if(void 0===t)throw new Error("'target' parameter is undefined");var s=[];t instanceof Element?s=[t]:void 0!==t.length&&0<t.length&&t[0]instanceof Element?s="function"==typeof t.get?t.get():t:"string"==typeof t&&(s=document.querySelectorAll(t)||[]);var o=[],h=[];if(s.forEach(function(t){-1===o.indexOf(t.parentNode)&&(o.push(t.parentNode),h.push(t))}),!n&&!h.length)throw new Error("There are no elements to initialize");return h.map(function(t){return new e(t,i)})},window.addEventListener("scroll",e.refreshAll),window.addEventListener("resize",e.hardRefreshAll);var r={parseNumber:function(t){return parseFloat(t)||0},findElement:function(t,i){return i||(i=document),"string"==typeof t?i.querySelector(t):t instanceof Element?t:void 0},getComputedBox:function(t){var i=t.getBoundingClientRect(),n=getComputedStyle(t);return{height:i.height,width:i.width,top:window.pageYOffset+i.top,bottom:window.pageYOffset+i.bottom,marginTop:r.parseNumber(n.marginTop),marginBottom:r.parseNumber(n.marginBottom),paddingTop:r.parseNumber(n.paddingTop),paddingBottom:r.parseNumber(n.paddingBottom),topWithMargin:window.pageYOffset+i.top-r.parseNumber(n.marginTop),bottomWithMargin:window.pageYOffset+i.bottom+r.parseNumber(n.marginBottom)}}};return e}();var jQueryPlugin=window.$||window.jQuery||window.Zepto;jQueryPlugin&&(jQueryPlugin.fn.sticksy=function(t){return Sticksy.initializeAll(this,t)});